---
// src/components/Hero.astro
import { Image } from 'astro:assets';

// 1. Force High Quality (to fix blurriness)
// 2. Use standard imports
import slide1 from '../assets/slphoto1.webp';
import slide2 from '../assets/slphoto2.webp';
import slide3 from '../assets/slphoto3.webp';
import slide4 from '../assets/slphoto4.webp';
import slide5 from '../assets/slphoto5.webp';
import slide6 from '../assets/slphoto6.webp';

const slides = [slide1, slide2, slide3, slide4, slide5, slide6];
---

<section class="relative w-full h-auto md:h-screen overflow-hidden group">
  <div class="embla w-full h-auto md:h-full" id="hero-slider">
    <div class="embla__container flex w-full h-auto md:h-full touch-pan-y">
      {slides.map((slide, index) => (
        <div class="embla__slide relative flex-[0_0_100%] min-w-0 w-full h-auto md:h-full">
          <Image 
            src={slide} 
            alt={`Slide ${index + 1}`} 
            class="w-full h-auto md:h-full md:object-cover"
            width={1920}
            height={1080}
            quality={100}
            loading={index === 0 ? "eager" : "lazy"}
          />
          
          <div class="absolute inset-0 bg-black/10 pointer-events-none"></div>
        </div>
      ))}
    </div>
  </div>
</section>

<script>
  import EmblaCarousel from 'embla-carousel';
  import Autoplay from 'embla-carousel-autoplay';

  const emblaNode = document.getElementById('hero-slider');

  if (emblaNode) {
    const emblaApi = EmblaCarousel(emblaNode, { 
      loop: true, 
      duration: 30,
    }, [
      Autoplay({ 
        delay: 5000, 
        stopOnInteraction: false 
      })
    ]);
  }
</script>